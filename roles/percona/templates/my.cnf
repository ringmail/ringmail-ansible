# Ansible managed: /home/mfrager/production/dyl/roles/mysql_community/templates/my.cnf.j2 modified on 2015-03-06 11:37:06 by mfrager on ansible1.revalead.com

[mysql]
default-character-set=utf8
port                           = 3306

[mysqld]

# GENERAL #
default_storage_engine         = InnoDB

# MyISAM #
myisam_recover                 = FORCE,BACKUP

# SAFETY #
max_connect_errors             = 1000000
innodb                         = FORCE

# LOGGING #
sync_binlog                    = 1

# CACHES AND LIMITS #
tmp_table_size                 = 32M
max_heap_table_size            = 32M
query_cache_type               = 0
query_cache_size               = 0
thread_cache_size              = 20
open_files_limit               = 65535
table_definition_cache         = 1024
table_open_cache               = 2048

# INNODB #
innodb_log_files_in_group      = 2

# LOGGING #
log_error                      = /var/lib/mysql/data/mysql-error.log
log_queries_not_using_indexes  = 1
slow_query_log                 = 1
slow_query_log_file            = /var/lib/mysql/data/mysql-slow.log

#
#

sql_mode="NO_ENGINE_SUBSTITUTION"
character-set-server=utf8
datadir=/var/lib/mysql 
socket=/var/lib/mysql/mysql.sock
user=mysql
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

# enable bin log
log-bin=mysqld-bin
expire_logs_days=30
binlog-format=ROW
log-bin-trust-function-creators=1
log_slave_updates=0

# enable slow query log
#slow-query-log-file=/var/log/mysql-slow.log
log_output=TABLE
slow-query-log=1
long_query_time=10
  
# This duplicated config is needed for /etc/init.d/mysql provided by Oracle.
pid-file=/var/lib/mysql/mysqld.pid

max_connections=1000
max_allowed_packet=32M
innodb_buffer_pool_size=40G
innodb_log_file_size=1G
innodb_flush_method=O_DIRECT
innodb_file_per_table=1
innodb_flush_neighbors=0
innodb_log_buffer_size=64M
join_buffer_size=1M
sort_buffer_size=1M
key_buffer_size=32M

#innodb_flush_log_at_trx_commit=2
#innodb_read_io_threads=16
#innodb_adaptive_hash_index=0
#innodb_io_capacity=500
#innodb_use_native_aio=0

# Production replication
server-id=4
  
[mysqld_safe]
log-error=/var/log/mysql.log
pid-file=/var/lib/mysql/mysqld.pid
